#Created with https://sequencediagram.org/

title Message sequence diagram
participant GameWindow
participant BallControl
participant BallDrawer
participant Map
participant GameScene

participant GameControl

note over GameWindow:Poll control keys
GameWindow->BallControl:msgKeyEvent
note over BallControl:Generate forces and calculate next ball position 
BallControl->BallDrawer:msgBallPositionAndDistance
note over BallDrawer:Update ball uniforms, propagate position data
BallDrawer->Map:msgBallPosition
note over Map:Calculate actual tile type from ball position
Map->BallControl:msgActualTileType
note over BallControl:Calculate ball state from actual tile type
BallControl->GameControl:msgGameStateChange
note over GameControl:Handle ball lost/level won event, restart or advance level
BallDrawer->GameScene:msgBallPosition
note over GameScene:Update global uniforms and trigger scene drawing
GameScene->Map:msgRedrawTrigger
GameScene->BallDrawer:msgRedrawTrigger