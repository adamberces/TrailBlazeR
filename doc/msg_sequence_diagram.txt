#Created with https://sequencediagram.org/
title Message sequence diagram
participant GameWindow
participant BallControl
participant BallDrawer
participant Map
participant GameScene

participant GameControl

participant HUD
participant Background
participant SoundControl

note over GameWindow:Poll control keys
GameWindow->BallControl:msgKeyEvent_e
note over BallControl:Generate forces and calculate next ball position 
BallControl->SoundControl:msgSoundEvent_e
BallControl->BallDrawer:msgBallPositionAndDistance_s
note over BallDrawer:Update ball uniforms, propagate position data
BallDrawer->Map:msgBallPosition_s
note over Map:Calculate actual tile type from ball position
Map->BallControl:msgActualTileType_s
note over BallControl:Calculate ball state from actual tile type
BallControl->GameControl:msgBallStateChange_e
note over GameControl:Handle ball lost/level won event, restart or advance level
Map->HUD:msgMapData_s
GameControl->HUD:msgRemainingLives_s
note over HUD:Update text to display on top of the screen
BallDrawer->GameScene:msgBallPosition_s
note over GameScene:Update global uniforms and trigger scene drawing
GameScene->Background:msgRedrawTrigger_s
GameScene->Map:msgRedrawTrigger_s
GameScene->BallDrawer:msgRedrawTrigger_s
GameScene->HUD:msgRedrawTrigger_s